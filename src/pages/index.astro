---
import { Image } from 'astro:assets';
import Header from '../components/ui/Header';
import Portfolio from '../components/sections/Portfolio.astro';
import Contact from '../components/sections/Contact.astro';
import ServicesSection from '../components/sections/ServicesSection.astro';
import AboutSection from '../components/sections/AboutSection.astro';
import ImageBreakSection from '../components/sections/ImageBreakSection.astro';
import RealEstateHero from '../components/sections/RealEstateHero.astro';
import RealEstateAboutMe from '../components/sections/RealEstateAboutMe.astro';
import RealEstateServices from '../components/sections/RealEstateServices.astro';
import RealEstateCTA from '../components/sections/RealEstateCTA.astro';
import RealEstateLocationMap from '../components/sections/RealEstateLocationMap';
import '../styles/global.css';

// Import the hero images
import heroImage from '../../public/images/Welcome.jpeg';

const SITE_TITLE = "Rosy Santisteban - Cocinas y Bienes Raíces";
const SITE_DESCRIPTION = "Cocinas de Lujo y Bienes Raíces por Rosy Santisteban";
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={SITE_DESCRIPTION} />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
		<link rel="icon" type="image/svg+xml" href="/R.svg" />
		<title>{SITE_TITLE}</title>
		
		<!-- Leaflet CSS -->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
		
		<!-- EmailJS carga simple y directa -->
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
		<script type="text/javascript">
			// Inicializar EmailJS con la clave pública
			(function() {
				emailjs.init("bmCsAVRUy8IyOpEpc");
			})();
		</script>
	</head>
	<body>
		<Header client:load />
		<main>
			<!-- Fixed background image -->
			<div id="bg-image" class="bg-image">
				<Image 
					src={heroImage} 
					alt="Luxury background" 
					width={2000}
					height={1300}
					class="w-full h-full object-cover"
				/>
				<div class="absolute inset-0 bg-black/40"></div>
			</div>

			<!-- Main Hero Section -->
			<section id="hero-section" class="parallax-section flex items-center justify-center">
				<div class="max-w-7xl mx-auto px-4 sm:px-6 text-center relative z-10">
					<div class="max-w-4xl mx-auto content-wrapper active" style="margin-top: -2rem;">
						<h1 
							class="text-4xl sm:text-5xl md:text-6xl lg:text-8xl text-white mb-8 sm:mb-12 leading-tight tracking-wider font-extralight"
							style="font-family: var(--font-family-tempting);"
						>
							Rosy Santisteban
						</h1>
						<p 
							class="text-lg md:text-xl text-white/90 mb-12 sm:mb-16 max-w-2xl mx-auto leading-relaxed font-light"
							style="font-family: var(--font-family-playfair);"
						>
							Creando espacios excepcionales y oportunidades únicas
						</p>
						
						<!-- Section Navigation Buttons -->
						<div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
							<button 
								id="byrosy-btn"
								class="section-nav-button active"
							>
								<span class="btn-text">ByRosy</span>
								<span class="btn-subtitle">Cocinas de Lujo</span>
							</button>
							
							<button 
								id="realestate-btn"
								class="section-nav-button"
							>
								<span class="btn-text">Gonzales Concreta</span>
								<span class="btn-subtitle">Bienes Raíces</span>
							</button>
						</div>
					</div>
				</div>
			</section>

			<!-- ByRosy Sections (initially visible) -->
			<div id="byrosy-sections" class="section-group active">
				<!-- About section -->
				<AboutSection />

				<!-- Image break section (Welcome3) -->
				<ImageBreakSection />

				<!-- Services section -->
				<section id="services">
					<ServicesSection />
				</section>
				
				<section id="portfolio">
					<Portfolio />
				</section>
			</div>

			<!-- Real Estate Sections (initially hidden) -->
			<div id="realestate-sections" class="section-group">
				<!-- Real Estate Hero Section -->
				<RealEstateHero />
				
				<!-- About Me as Real Estate Advisor -->
				<RealEstateAboutMe />
				
				<!-- Real Estate Services -->
				<!--RealEstateServices -->
				
				<!-- Real Estate Location Map -->
				<!--RealEstateLocationMap client:only="react" -->
				
			</div>
			
			<!-- Shared Contact Section - Always visible regardless of active section -->
			<section id="contact">
				<Contact />
			</section>
		</main>

		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const byrosyBtn = document.getElementById('byrosy-btn');
				const realestateBtn = document.getElementById('realestate-btn');
				const byrosySections = document.getElementById('byrosy-sections');
				const realestateSections = document.getElementById('realestate-sections');
				const heroSection = document.getElementById('hero-section');
				
				// Section switching functionality
				function switchToSection(
					activeBtn: HTMLElement | null, 
					inactiveBtn: HTMLElement | null, 
					showSections: HTMLElement | null, 
					hideSections: HTMLElement | null
				) {
					// Update button states
					activeBtn?.classList.add('active');
					inactiveBtn?.classList.remove('active');
					
					// Update section visibility
					showSections?.classList.add('active');
					hideSections?.classList.remove('active');
					
					// First scroll back to the hero section to ensure we're at the top
					if (heroSection) {
						window.scrollTo({
							top: heroSection.offsetHeight - 50, // Just below the hero
							behavior: 'smooth' // Immediate scroll
						});
					}
					
					// Then after a brief delay, scroll to the target section
					setTimeout(() => {
						// For ByRosy, scroll to the about section
						// For Real Estate, scroll to the realestate-about section
						const targetId = showSections?.id === 'byrosy-sections' ? 'about' : 'realestate-about';
						const targetSection = document.getElementById(targetId);
						
						if (targetSection) {
							// Scroll to the beginning of the section with a small offset
							window.scrollTo({
								top: targetSection.offsetTop - 80, // Account for header height
								behavior: 'smooth'
							});
						}
					}, 50); // Reduced timeout for faster response
				}
				
				// Event listeners for section buttons
				byrosyBtn?.addEventListener('click', () => {
					switchToSection(byrosyBtn, realestateBtn, byrosySections, realestateSections);
				});
				
				realestateBtn?.addEventListener('click', () => {
					switchToSection(realestateBtn, byrosyBtn, realestateSections, byrosySections);
				});
			});
		</script>
	</body>
</html>
